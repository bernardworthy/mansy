{"version":3,"sources":["init.js","app.js","etsy-api.js","listings-page.js","profile-page.js"],"names":["processHash","hash","location","app","router","run","slice","jQuery","window","load","$","isotope","itemSelector","layoutMode","Rlite","EtsyApi","spec","apiKey","Error","baseUrl","apiVersion","self","listings","url","promise","Deferred","req","getJSON","done","data","ok","resolve","reject","userDetail","userId","add","api","console","log","listingTemplate","_","template","html","variable","items","results","fail","status","err","on","scrollTop","r","params","userid","profileTemplate","user","addEventListener"],"mappings":"AAEA,QAAAA,eACA,GAAAC,GAAAC,SAAAD,MAAA,GAEAE,KAAAC,OAAAC,IAAAJ,EAAAK,MAAA,IAGAC,OAAAC,QAAAC,KAAA,WACAC,EAAA,cAAAC,SACAC,aAAA,QACAC,WAAA,cCVA,GAAAV,MACAC,OAAAU,QCFAX,KAAAY,QAAA,SAAAC,GACA,IAAAA,EAAAC,OACA,KAAA,IAAAC,OAAA,0BAGA,IAAAC,GAAA,6BAAAH,EAAAI,YAAA,MAEAC,GACAC,SAAA,WACA,GAAAC,GAAAJ,EAAA,kDAAAH,EAAAC,OAAA,cACAO,EAAAd,EAAAe,WAEAC,EAAAhB,EAAAiB,QAAAJ,GAAAK,KAAA,SAAAC,GACAA,EAAAC,GAMAN,EAAAO,QAAAF,GAFAL,EAAAQ,OAAAN,EAAA,gBAAAG,IAMA,OAAAL,IAGAS,WAAA,SAAAC,GAGA,GAAAX,GAAAJ,EAAA,UAAAe,EAAA,uBAAAlB,EAAAC,OAAA,cACAO,EAAAd,EAAAe,WAEAC,EAAAhB,EAAAiB,QAAAJ,GAAAK,KAAA,SAAAC,GACAA,EAAAC,GAIAN,EAAAO,QAAAF,GAFAL,EAAAQ,OAAAN,EAAA,gBAAAG,IAMA,OAAAL,IAIA,OAAAH,IC7CAlB,IAAAC,OAAA+B,IAAA,GAAA,WAEAhC,IAAAiC,IAAAd,WACAM,KAAA,SAAAC,GACAQ,QAAAC,IAAAT,EACA,IAAAU,GAAAC,EAAAC,SAAA/B,EAAA,aAAAgC,QAAAC,SAAA,KACAjC,GAAA,cAAAgC,KAAAH,GAAAK,MAAAf,EAAAgB,aAEAC,KAAA,SAAApB,EAAAqB,EAAAC,GACAX,QAAAC,IAAAU,KAGAtC,EAAAF,QAAAyC,GAAA,eAAA,WACAvC,EAAAF,QAAA0C,UAAA,OCbA/C,IAAAC,OAAA+B,IAAA,gBAAA,SAAAgB,GAEAhD,IAAAiC,IAAAH,WAAAkB,EAAAC,OAAAC,QACAzB,KAAA,SAAAC,GACAQ,QAAAC,IAAAT,EAAAgB,QAAA,GACA,IAAAS,GAAAd,EAAAC,SAAA/B,EAAA,YAAAgC,QAAAC,SAAA,KACAjC,GAAA,cAAAgC,KAAAY,GAAAC,KAAA1B,EAAAgB,QAAA,QAKAC,KAAA,SAAApB,EAAAqB,EAAAC,GACAX,QAAAC,IAAAU,KAGAtC,EAAAF,QAAAyC,GAAA,eAAA,WACAvC,EAAAF,QAAA0C,UAAA,OJhBA/C,IAAAiC,IAAAjC,IAAAY,SAAAE,OAAA,6BAsBAT,OAAAgD,iBAAA,aAAAxD,aACAA","file":"app.js","sourcesContent":["app.api = app.EtsyApi({apiKey: 'pq046kugg8nrx8f2mu71awb7'});\n// Hash-based routing\nfunction processHash() {\n  var hash = location.hash || '#';\n\n  app.router.run(hash.slice(1));\n\n  // function iso() {\n    jQuery(window).load( function() {\n      $('#container').isotope ({\n        itemSelector: '.item',\n        layoutMode : 'masonry'\n        // masonry: {\n        //   columnWidth: 50\n        // }\n      });\n    });\n  // }\n  // iso();\n\n}\n\nwindow.addEventListener('hashchange', processHash);\nprocessHash();\n","// The namespace for this application\nvar app = {\n  router: Rlite()\n};\n","app.EtsyApi = function (spec) {\n  if (!spec.apiKey) {\n    throw new Error('An API key is required!');\n  }\n\n  var baseUrl = 'https://openapi.etsy.com/' + (spec.apiVersion || 'v2');\n\n  var self = {\n    listings: function () {\n      var url = baseUrl + '/listings/active.js?includes=MainImage&api_key=' + spec.apiKey + '&callback=?';\n      var promise = $.Deferred();\n\n      var req = $.getJSON(url).done(function (data) {\n        if (!data.ok) {\n          // Keep our rejection in line with the standard jQuery\n          // rejection, passing req as first argument, status as second\n          // and error object as the third\n          promise.reject(req, 'Unknown error', data);\n        } else {\n          promise.resolve(data);\n        }\n      });\n\n      return promise;\n    },\n\n    userDetail: function (userId) {\n      /* TODO: Call the Etsy profile API */\n      //users/19181170/profile.js?api_key=pq046kugg8nrx8f2mu71awb7&callback=\n      var url = baseUrl + '/users/' + userId + '/profile.js?api_key=' + spec.apiKey + '&callback=?';\n      var promise = $.Deferred();\n\n      var req = $.getJSON(url).done(function(data) {\n        if (!data.ok) {\n\n          promise.reject(req, 'Unknown error', data);\n        } else {\n          promise.resolve(data);\n        }\n      });\n\n      return promise;\n    }\n  };\n\n  return self;\n};\n","app.router.add('', function() {\n\n  app.api.listings()\n    .done(function(data) {\n      console.log(data);\n      var listingTemplate = _.template($('#listings').html(), {variable: 'm'});\n      $('#container').html(listingTemplate({items: data.results}));\n    })\n    .fail(function(req, status, err) {\n      console.log(err);\n    });\n\n  $(window).on('beforeunload', function() {\n    $(window).scrollTop(0);\n  });\n\n});\n","app.router.add('users/:userid', function(r) {\n  // console.log(userId);\n  app.api.userDetail(r.params.userid)\n  .done(function(data) {\n    console.log(data.results[0]);\n    var profileTemplate = _.template($('#profile').html(), {variable: 'm'});\n    $('#container').html(profileTemplate({user: data.results[0]}));\n    // var profileTemplate = _.template($('#profile').html(), {variable: 'm'});\n    // console.log(profileTemplate({user: data.results[0]}));\n    // $('.main').html(profileTemplate({user: data.results[0]}));\n  })\n  .fail(function(req, status, err) {\n    console.log(err);\n  });\n\n  $(window).on('beforeunload', function() {\n    $(window).scrollTop(0);\n  });\n\n});\n"],"sourceRoot":"/source/"}