{"version":3,"sources":["init.js","app.js","etsy-api.js","listings-page.js","profile-page.js"],"names":["processHash","hash","location","app","router","run","slice","Rlite","EtsyApi","spec","apiKey","Error","baseUrl","apiVersion","self","listings","url","promise","$","Deferred","req","getJSON","done","data","ok","resolve","reject","shopByUserId","user_id","listingsByShopId","shop_id","userDetail","userId","add","api","console","log","listingTemplate","_","template","html","variable","items","results","fail","status","err","document","ready","dotdotdot","r","params","userid","profileTemplate","user","scrollTop","window","addEventListener"],"mappings":"AAEA,QAAAA,eACA,GAAAC,GAAAC,SAAAD,MAAA,GAEAE,KAAAC,OAAAC,IAAAJ,EAAAK,MAAA,ICJA,GAAAH,MACAC,OAAAG,QCFAJ,KAAAK,QAAA,SAAAC,GACA,IAAAA,EAAAC,OACA,KAAA,IAAAC,OAAA,0BAGA,IAAAC,GAAA,6BAAAH,EAAAI,YAAA,MAEAC,GACAC,SAAA,WACA,GAAAC,GAAAJ,EAAA,kDAAAH,EAAAC,OAAA,cACAO,EAAAC,EAAAC,WAEAC,EAAAF,EAAAG,QAAAL,GAAAM,KAAA,SAAAC,GACAA,EAAAC,GAMAP,EAAAQ,QAAAF,GAFAN,EAAAS,OAAAN,EAAA,gBAAAG,IAMA,OAAAN,IAGAU,aAAA,SAAAC,GACA,GAAAZ,GAAAJ,EAAA,UAAAgB,EAAA,wCAAAnB,EAAAC,OAAA,cACAO,EAAAC,EAAAC,WAEAC,EAAAF,EAAAG,QAAAL,GAAAM,KAAA,SAAAC,GACAA,EAAAC,GAMAP,EAAAQ,QAAAF,GAFAN,EAAAS,OAAAN,EAAA,gBAAAG,IAMA,OAAAN,IAGAY,iBAAA,SAAAC,GACA,GAAAd,GAAAJ,EAAA,UAAAkB,EAAA,kDAAArB,EAAAC,OAAA,cACAO,EAAAC,EAAAC,WAEAC,EAAAF,EAAAG,QAAAL,GAAAM,KAAA,SAAAC,GACAA,EAAAC,GAMAP,EAAAQ,QAAAF,GAFAN,EAAAS,OAAAN,EAAA,gBAAAG,IAMA,OAAAN,IAGAc,WAAA,SAAAC,GAGA,GAAAhB,GAAAJ,EAAA,UAAAoB,EAAA,uBAAAvB,EAAAC,OAAA,cACAO,EAAAC,EAAAC,WAEAC,EAAAF,EAAAG,QAAAL,GAAAM,KAAA,SAAAC,GACAA,EAAAC,GAIAP,EAAAQ,QAAAF,GAFAN,EAAAS,OAAAN,EAAA,gBAAAG,IAMA,OAAAN,IAIA,OAAAH,ICjFAX,IAAAC,OAAA6B,IAAA,GAAA,WAEA9B,IAAA+B,IAAAnB,WACAO,KAAA,SAAAC,GACAY,QAAAC,IAAAb,EACA,IAAAc,GAAAC,EAAAC,SAAArB,EAAA,aAAAsB,QAAAC,SAAA,KACAvB,GAAA,cAAAsB,KAAAH,GAAAK,MAAAnB,EAAAoB,aAEAC,KAAA,SAAAxB,EAAAyB,EAAAC,GACAX,QAAAC,IAAAU,KAGA5B,EAAA6B,UAAAC,MAAA,WACA9B,EAAA,iBAAA+B,gBCbA9C,IAAAC,OAAA6B,IAAA,gBAAA,SAAAiB,GAEA/C,IAAA+B,IAAAH,WAAAmB,EAAAC,OAAAC,QACA9B,KAAA,SAAAC,GACAY,QAAAC,IAAAb,EAAAoB,QAAA,GACA,IAAAU,GAAAf,EAAAC,SAAArB,EAAA,YAAAsB,QAAAC,SAAA,KACAvB,GAAA,cAAAsB,KAAAa,GAAAC,KAAA/B,EAAAoB,QAAA,QAKAC,KAAA,SAAAxB,EAAAyB,EAAAC,GACAX,QAAAC,IAAAU,KAIA3C,IAAA+B,IAAAP,aAAAuB,EAAAC,OAAAC,QACA9B,KAAA,SAAAC,GACAY,QAAAC,IAAAb,EACA,IAAAO,GAAAP,EAAAoB,QAAA,GAAAb,OAEA3B,KAAA+B,IAAAL,iBAAAC,GACAR,KAAA,SAAAC,GACA,GAAAc,GAAAC,EAAAC,SAAArB,EAAA,aAAAsB,QAAAC,SAAA,KACAvB,GAAA,qBAAAsB,KAAAH,GAAAK,MAAAnB,EAAAoB,aAGAC,KAAA,SAAAxB,EAAAyB,EAAAC,GACAX,QAAAC,IAAAU,OASAF,KAAA,SAAAxB,EAAAyB,EAAAC,GACAX,QAAAC,IAAAU,KAGA5B,EAAA6B,UAAAQ,UAAA,KJzCApD,IAAA+B,IAAA/B,IAAAK,SAAAE,OAAA,6BAsBA8C,OAAAC,iBAAA,aAAAzD,aACAA","file":"app.js","sourcesContent":["app.api = app.EtsyApi({apiKey: 'pq046kugg8nrx8f2mu71awb7'});\n// Hash-based routing\nfunction processHash() {\n  var hash = location.hash || '#';\n\n  app.router.run(hash.slice(1));\n\n  // function iso() {\n    // jQuery(window).load( function() {\n    //   $('#container').isotope ({\n    //     itemSelector: '.item',\n    //     layoutMode : 'masonry'\n    //     // masonry: {\n    //     //   columnWidth: 50\n    //     // }\n    //   });\n    // });\n  // }\n  // iso();\n\n}\n\nwindow.addEventListener('hashchange', processHash);\nprocessHash();\n","// The namespace for this application\nvar app = {\n  router: Rlite()\n};\n","app.EtsyApi = function (spec) {\n  if (!spec.apiKey) {\n    throw new Error('An API key is required!');\n  }\n\n  var baseUrl = 'https://openapi.etsy.com/' + (spec.apiVersion || 'v2');\n\n  var self = {\n    listings: function () {\n      var url = baseUrl + '/listings/active.js?includes=MainImage&api_key=' + spec.apiKey + '&callback=?';\n      var promise = $.Deferred();\n\n      var req = $.getJSON(url).done(function (data) {\n        if (!data.ok) {\n          // Keep our rejection in line with the standard jQuery\n          // rejection, passing req as first argument, status as second\n          // and error object as the third\n          promise.reject(req, 'Unknown error', data);\n        } else {\n          promise.resolve(data);\n        }\n      });\n\n      return promise;\n    },\n\n    shopByUserId: function (user_id) {\n      var url = baseUrl + '/users/' + user_id + '/shops.js?includes=MainImage&api_key=' + spec.apiKey + '&callback=?';\n      var promise = $.Deferred();\n\n      var req = $.getJSON(url).done(function (data) {\n        if (!data.ok) {\n          // Keep our rejection in line with the standard jQuery\n          // rejection, passing req as first argument, status as second\n          // and error object as the third\n          promise.reject(req, 'Unknown error', data);\n        } else {\n          promise.resolve(data);\n        }\n      });\n\n      return promise;\n    },\n\n    listingsByShopId: function (shop_id) {\n      var url = baseUrl + '/shops/' + shop_id + '/listings/active.js?includes=MainImage&api_key=' + spec.apiKey + '&callback=?';\n      var promise = $.Deferred();\n\n      var req = $.getJSON(url).done(function (data) {\n        if (!data.ok) {\n          // Keep our rejection in line with the standard jQuery\n          // rejection, passing req as first argument, status as second\n          // and error object as the third\n          promise.reject(req, 'Unknown error', data);\n        } else {\n          promise.resolve(data);\n        }\n      });\n\n      return promise;\n    },\n\n    userDetail: function (userId) {\n      /* TODO: Call the Etsy profile API */\n      //users/19181170/profile.js?api_key=pq046kugg8nrx8f2mu71awb7&callback=\n      var url = baseUrl + '/users/' + userId + '/profile.js?api_key=' + spec.apiKey + '&callback=?';\n      var promise = $.Deferred();\n\n      var req = $.getJSON(url).done(function(data) {\n        if (!data.ok) {\n\n          promise.reject(req, 'Unknown error', data);\n        } else {\n          promise.resolve(data);\n        }\n      });\n\n      return promise;\n    }\n  };\n\n  return self;\n};\n","app.router.add('', function() {\n\n  app.api.listings()\n  .done(function(data) {\n    console.log(data);\n    var listingTemplate = _.template($('#listings').html(), {variable: 'm'});\n    $('#container').html(listingTemplate({items: data.results}));\n  })\n  .fail(function(req, status, err) {\n    console.log(err);\n  });\n\n  $(document).ready(function() {\n  \t$(\".text-content\").dotdotdot();\n  });\n\n  // jQuery(window).load( function() {\n  //   $('#container').isotope ({\n  //     itemSelector: '.item',\n  //     layoutMode : 'masonry'\n  //     // masonry: {\n  //     //   columnWidth: 50\n  //     // }\n  //   });\n  // });\n\n  // $(document).scrollTop(0);\n\n  // $(window).on('beforeunload', function() {\n  //   $(window).scrollTop(0);\n  // });\n});\n","app.router.add('users/:userid', function(r) {\n  // console.log(userId);\n  app.api.userDetail(r.params.userid)\n  .done(function(data) {\n    console.log(data.results[0]);\n    var profileTemplate = _.template($('#profile').html(), {variable: 'm'});\n    $('#container').html(profileTemplate({user: data.results[0]}));\n    // var profileTemplate = _.template($('#profile').html(), {variable: 'm'});\n    // console.log(profileTemplate({user: data.results[0]}));\n    // $('.main').html(profileTemplate({user: data.results[0]}));\n  })\n  .fail(function(req, status, err) {\n    console.log(err);\n  });\n\n\n  app.api.shopByUserId(r.params.userid)\n  .done(function(data) {\n    console.log(data);\n    var shop_id = data.results[0].shop_id;\n\n    app.api.listingsByShopId(shop_id)\n    .done(function(data) {\n      var listingTemplate = _.template($('#listings').html(), {variable: 'm'});\n      $('#profile-listings').html(listingTemplate({items: data.results}));\n\n    })\n    .fail(function(req, status, err) {\n      console.log(err);\n    });\n    // for (i = 0; i < data.results.length; i++) {\n      // if (data.results[i].user_id === r.params.userid) {\n  // $('#profile-listings').html(listingTemplate({items: data.results[0]}));\n      // }\n    // }\n\n  })\n  .fail(function(req, status, err) {\n    console.log(err);\n  });\n\n  $(document).scrollTop(0);\n\n\n  //\n  // $(window).on('beforeunload', function() {\n  //   $(window).scrollTop(0);\n  // });\n\n});\n"],"sourceRoot":"/source/"}